<form>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <input type="text" class="form-control" id="planYearEnds">
                        <label for="planYearEnds">Plan Year Ends</label>
                    </div>
                    <div class="form-group col-md-4">
                        <button type="button" class="btn btn-secondary" id="servicesAndBilling">Services And Billing</button>
                    </div>
                    <div class="form-group col-md-4">
                        <button type="button" class="btn btn-secondary" id="pyeTesting1">PYE Testing</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-2">
                        <label>YEAR END INFO</label>
                    </div>
                    <div class="form-group col-md-2">
                        <label>COUNTS</label>
                    </div>
                    <div class="form-group col-md-8">
                        <label>5500 INFO</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="yearEnd">
                        <label for="yearEnd">Year End</label>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="eligibleEmployees">
                        <label for="eligibleEmployees">Eligible Employees</label>
                    </div>
                    <div class="form-group col-md-2">
                        <button type="button" class="btn btn-primary" id="xml5500">5500 XML</button>
                        <button type="button" class="btn btn-primary" id="email5500">5500 Email</button>
                    </div>
                    <div class="form-group col-md-3">
                        <input type="text" class="form-control" id="type5500">
                        <label for="type5500">5500 Type</label>
                    </div>
                    <div class="form-group col-md-3">
                        <input type="text" class="form-control" id="filingStatus">
                        <label for="filingStatus">Filing Status</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="yearStart">
                        <label for="yearStart">Year Start</label>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="totalEmployees">
                        <label for="totalEmployees">Total Employees</label>
                    </div>
                    <div class="form-group col-md-2">
                        <button type="button" class="btn btn-primary" id="yeq">YEQ</button>
                        <button type="button" class="btn btn-primary" id="dfvcEmail">DFVC Email</button>
                    </div>
                    <div class="form-group col-md-3">
                        <input type="text" class="form-control" id="signer5500">
                        <label for="signer5500">5500 Signer</label>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input class="form-check-input" id="partial5500" type="checkbox"> 5500 Partial
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="taxYear">
                        <label for="taxYear">Tax Year</label>
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                    <div class="form-group col-md-2">
                        <button type="button" class="btn btn-primary" id="resetPortalUser">Reset Portal User</button>
                        <button type="button" class="btn btn-primary" id="addCompanyToFTW">Add Company to FTW</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="pointsValue">
                        <label for="pointsValue">Points Value</label>
                    </div>
                    <div class="form-group col-md-2">
                        <button type="button" class="btn btn-primary" id="contributionSources">Contribution Sources</button>
                        <button type="button" class="btn btn-primary" id="moveItemsToPSC">Move Items To PSC</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>SERVICES</label>
                    </div>
                    <div class="form-group col-md-6">
                        <label>FORFEITURE INFO</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="planDocument"> Plan Document
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="yearEndComplianceTesting"> Year End
                                Compliance Testing
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="matchForfType">
                        <label for="matchForfType">Match Forf Type</label>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="matchForfAmt">
                        <label for="matchForfAmt">Match Forf Amt</label>
                    </div>
                    <div class="form-group col-md-2">
                        <button type="button" class="btn btn-primary" id="folder">Folder</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="midYrComplianceTesting"> Mid Yr
                                Compliance Testing
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="preparation5500"> 5500 Preparation
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="psForfType">
                        <label for="psForfType">P/S Forf Type</label>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" id="psForfAmt">
                        <label for="psForfAmt">P/S Forf Amt</label>
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="employerAllocations"> Employer
                                Allocations
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="matchingAllocations"> Matching
                                Allocations
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-2">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="unusedForfeitures"> Unused
                                Forfeitures
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="shMatchCalc"> SH Match - Calc
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="shNonElectiveCalc"> SH Non Elective
                                - Calc
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                    <div class="form-group col-md-2">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>SCRIPTING</label>
                    </div>
                    <div class="form-group col-md-6">
                        <label>PLAN FEATURES</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="mmlContribution"> MML Contribution
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="stopAutomation"> Stop Automation
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="easyEligibility"> EASY Eligibility
                            </label>
                        </div>
                        <input type="text" class="form-control" id="ascNumber">
                        <label for="ascNumber">ASC Number</label>
                    </div>
                    <div class="form-group col-md-3">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="safeHarborPlan"> Safe Harbor Plan
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="safeHarborAdpAcp"> Safe Harbor
                                ADP/ACP
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="simplePlan"> Simple Plan
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="newComp"> New Comp
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="ageWeighted"> Age Weighted
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="afterTax"> After Tax
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="nonErisaPlan"> Non Erisa Plan
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="matchOnlyPlan"> Match Only Plan
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="qaca"> QACA
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="eaca"> EACA (6 month correction)
                            </label>
                        </div>
                    </div>
                    <div class="form-group col-md-3">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="svcMatch"> Svc Match
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="nav"> NAV
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="pdiData"> PDI Data
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="lifeInsurance"> Life Insurance
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="churchCertiInsert"> Church Certi
                                Insert
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="noCatchup"> No Catch-up
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="multipleEr"> Multiple ER
                            </label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="controlledGroup"> Controlled Group
                            </label>
                        </div>
                        <button type="button" class="btn btn-primary" id="controlledGroupButton">Controlled Group</button>
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="testByLocation"> Test By Location
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-12">
                        <input type="text" class="form-control" id="installationNote">
                        <label for="installationNote">Comments</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-3">
                        <button type="button" class="btn btn-primary" id="planSpecs">Plan Specs</button>
                    </div>
                    <div class="form-group col-md-3">
                        <button type="button" class="btn btn-primary" id="pyeTesting2">PYE Testing</button>
                    </div>
                    <div class="form-group col-md-3">
                        <button type="button" class="btn btn-primary" id="pyeQa">PYE QA</button>
                    </div>
                    <div class="form-group col-md-3">
                        <button type="button" class="btn btn-primary" id="teamChecklist">Team Checklist</button>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
import React, { useEffect, useState } from 'react';
import './AddPlan.css';
import myimage from'./logo-new.png';
import { useNavigate } from 'react-router-dom';
import './Testing.css';
import  Plans from './Plans.json'
import PlanInfo from './PlanInfo.json'
import xml from './test_xml.xml'
import {  FaFolder } from "react-icons/fa";
import axios from 'axios';
import Modal from 'react-modal';
function Testing()
{
    const [plans,setPlans]=useState(Plans);
    
    const [newPlan,setNewPlan]=useState();
    const [newPlanInfo,setNewPlanInfo]=useState();
    const [currentPlan,setCurrentPlan]=useState();
    const [planInfo,setPLanInfo] = useState(PlanInfo);
    const [currentPLanInfo,setCurrentPlanInfo]=useState();
    const [readxml,setReadxml]=useState(null);
    const [loading, setLoading] = useState(true); // Added loading state
    const [planDocumentBtn,setPLanDocumentBtn]=useState();
    const [fileList,setFileList] = useState();

    // console.log("xml is "+readxml);
    const navigate=useNavigate()
    async function fetchXml(){
        const response = await fetch(xml);
        const xmldata = await response.text()
        return xmldata;
    }
    function activatePlanDocument()
    {
        setPLanDocumentBtn("activate");
    }
    function closePlanDocument()
    {
        setPLanDocumentBtn(null);
    }
    const openFile = (fileName) => {
        // Download the selected file from the backend
        console.log("lolo boss");
        window.open(`http://localhost:8081/${fileName}`,'_blank');
      };
    useEffect(()=>{
            async function getdata(){
            await axios.get("http://localhost:8081/getplans")
            .then(res=>{
                console.log("plan is"+newPlan);
                setNewPlan(res.data)
                setLoading(false)
                
                })
            .catch(err =>{console.log(err)
            setLoading(false)})
            }
            
          getdata();
          async function filedata(){
            await axios.get('http://localhost:8081/list')
      .then(response => setFileList(response.data))
      .catch(error => console.error('Error fetching file list:', error));
        }
        filedata()
        
        
          axios.get('http://your-backend-url/api/files/list')
          .then(response => setFileList(response.data))
          .catch(error => console.error('Error fetching file list:', error));


          async function getPlanInfodata(){
            await axios.get("http://localhost:8081/getplaninfo")
            .then(res=>{
                console.log("planinfo is"+newPlanInfo);
                setNewPlanInfo(res.data)
                })
            .catch(err =>{console.log(err)
            setLoading(false)})
            }
            getPlanInfodata();
        // async function fetchdata()
        // {
        //     const xmldata=await fetchXml();
        //     parseString(xmldata,(err,result)=>{
        //         if(!err)
        //         {
        //             setReadxml(result)
        //             console.log("result is "+result);
        //             console.log(readxml);
        //         }else{
        //             console.error('error parsing ',err);
        //         }
        //     })
        // }
        // getplandata();
        // console.log(newPlan);
    // fetchdata();
    
    
    },[])
    function Home1()
    {
        return navigate("/Home")
    }
    
    const sorting1=(col)=>
    {
        const sorted=[...newPlan].sort((a,b)=>
        a[col]>b[col]?1 :-1);
        setNewPlan(sorted)
    }
    const sorting=(col)=>
    {
        
            const sorted=[...newPlan].sort((a,b)=>
            a[col].toLowerCase()>b[col].toLowerCase( ) ?1 :-1);
            setNewPlan(sorted)
    }
    function inputfield(obj){
        setCurrentPlan(obj);
        console.log(newPlanInfo);
        var output= newPlanInfo?.filter((plan)=>{
            return obj.planId===plan.planId;
           
        })
        console.log(output[0]);
        setCurrentPlanInfo(output[0]);
        
    }
    
    return (
    <div className='body'>
        <header className="header1">
            <div className='head1'>
                
                <div className='sub0'>
                    <img className="image1" src={myimage} alt="not found"></img>
                    <h3 className='testingP'>Compliance</h3>
                </div>
                <div className='sub01'>
                    <button className='btn1' onClick={Home1}>Home</button>
                    <button className='btn1'>Plan Info</button>
                    <button className='btn1'>SetUp</button>
                    <button className='btn1'>PYE</button>
                    <button className='btn1'>Event Log</button>
                    <button className='btn1'>Contacts</button>
                    <button className='btn1'>Amendments</button>
                    <button className='btn1'>Test</button>
                    
                </div>
                
            </div>
        </header>
        
        <div className='planname'>
            planNumber:<input  style={{marginRight:"20px"}} value={currentPlan?.planNumber}/> 
            planId:<input value={currentPlan?.planName}/>   
        </div>
        <div className='leftmenu'>
            <div className='side1'>
                {
                    newPlan?.map((obj)=>(
                        <div className='side1style'>
                            <span style={{paddingRight:"10px"}}><FaFolder/></span><button style={{border:"none",background:"none"}} onClick={()=>inputfield(obj)}><span> {obj.planNumber} {obj.planName}</span></button>
                        </div>
                    ))
                }
            </div>
            <div className='side2'>
                <div>
                    <i class="jstree-icon jstree-ocl" role="presentation"></i>
                    <button style={{background:"none",border:"none"}}  onClick={()=>{sorting1("planNumber")}}>Plans by Number</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>Plans By Name</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>Plans By Client</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>Plans In StartUp</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>BY Institution</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>Contacts</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>By Analyst</button><br/>
                    <button style={{background:"none",border:"none"}} onClick={()=>{sorting("planName")} }>Termed Plans</button><br/>
                    <button onClick={()=>{sorting("planName")} }>Plans w/o Primary Contacts</button><br/>
                    <button onClick={()=>{sorting("planName")} }>Deleted Plans</button><br/>
                </div>
            </div>
        </div>
        <div className='rightmenu'>
            
                <div className='row1'>
                    <div className='row11'>
                        <input value={currentPLanInfo?.clientName}/>
                        <br/>Client Name
                    </div>
                    <div className='row11'>
                    <input value={currentPLanInfo?.prospectivePlanNumber}/>
                        <br/>Propective Plan Number
                    </div>
                </div>
                <div className='row1'>
                    <div className='row11'>
                    <input value={currentPLanInfo?.einNumber}/>
                        <br/>EIN #
                    </div>
                    
                </div>
                <div className='row1'>
                    <div className='row11'>
                        <input value={currentPLanInfo?.institution}/>
                        <br/>Institution
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.groupOffice}/>
                        <br/>Group Office
                    </div>
                    <div className='row11'>
                    <input value={currentPLanInfo?.planType}/><br/>
                        Plan Type 
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.trustEin}/><br/>
                        Trust Ein
                    </div>
                </div>
                <div className='row1'>
                    <div className='row11'>
                        <input value={currentPLanInfo?.subInstitution}/>
                        <br/>Sub Institution
                    </div>
                    
                </div>
                <div className='row1'>
                    <div className='row11'>
                        <input value={currentPLanInfo?.complianceAnalyst}/>
                        <br/>Compliance Analyst
                    </div>
                    <div className='row11'><button onClick={activatePlanDocument} className='planbtn'>Plan Document</button></div>
                    <div className='row11'><button className='planbtn'>Plan Folder</button></div>
                    <div className='row11'><button className='planbtn'>Scan Sheets</button></div>
                    <div className='row11'><button className='planbtn'>Update FTW</button></div>
                </div>
                <div className='row1'>
                    <div className='row11'>
                        <input checked={currentPLanInfo?.secondaryCaseload} type='checkbox'/>Secondary Caseload
                    </div>   
                </div>

                <div className='row1'>
                    <div className='row11'>
                        <input checked={currentPLanInfo?.gwg} type='checkbox'/>GWG
                    </div> 
                    <div className='row11' style={{marginLeft:"120px"}}>
                        <input value={currentPLanInfo?.gwgServices}/>
                        <br/>GWG Services
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.gwgWorkTracking}/>
                        <br/>GWG Work Tracking
                    </div> 
                    <div className='row11'><button className='planbtn'>GWG Follow Up</button> </div>
                    
                </div>
                <div className='row1'>
                    <div className='row11'>
                        <input value={currentPLanInfo?.planYearEnd} type='date'/>
                        <br/>Plan Year End
                    </div>
                    <div className='row11' style={{marginLeft:"63px"}}>
                        <input value={currentPLanInfo?.planTier}/>
                        <br/>Plan Teir
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.irsPlanType}/><br/>
                        IRS Plan Type
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.marketSegment}/><br/>
                        Market Segment
                    </div>
                </div>
                
                <div className='row1'>
                    <div className='row11' style={{marginRight:"21px"}}>
                        <input value={currentPLanInfo?.institution}/>
                        <br/>Institution
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.groupOffice}/>
                        <br/>Group Office
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.planType}/><br/>
                        Plan Type
                    </div>
                    <div className='row11'>
                        <input value={currentPLanInfo?.trustEin}/><br/>
                        Trust Ein
                    </div>
                </div>
                <div className='row1'>
                    <div className='row11'>
                        Plan Characteristics
                    </div>
                    <div className='row11'>
                        <input checked={currentPLanInfo?.jumbo401k} type='checkbox'/>Jumbo 401(k)
                    </div>
                </div>

                <div className='row1'>
                    <div className='row11' style={{marginRight:"55px"}}>
                    <input checked={currentPLanInfo?.ppsExternal} type='checkbox'/>PPSExternal
                    </div>
                    <div className='row11'>
                        <input checked={currentPLanInfo?.peakPilotPlan} type='checkbox'/>PEAK Pilot Plan
                    </div>
                </div>
                <Modal
                    isOpen={!!planDocumentBtn}
                    onRequestClose={closePlanDocument}
                    contentLabel="modal"
                    className={"modal1"}>
                    {
                        planDocumentBtn &&(<>
                        <div>
      <h2>File List:</h2>
      
      <ul>
        {fileList?.map((file, index) => (
          <li key={index} onClick={() => openFile(file)}>
            {file}
          </li>
        ))}
      </ul>
      <button className='modalbtn' onClick={closePlanDocument}>close </button> 
    </div>
                        
                        
                        </>)
                    }
                </Modal>
                <button className='planbtn'>Submit</button>
                <div>
                    {/* {readxml?(<HI language='xml' style={solarizedLight}>{readxml}</HI>):(<p>loading..</p>)} */}
                     {/* {readxml ?(<pre>{JSON.stringify(readxml.env,null,2)}</pre>):(<p>loading xml data</p>)} */}
                </div>
            </div>
        </div>
    
    )
}
export default Testing;
